(function(t){function e(e){for(var o,c,i=e[0],s=e[1],u=e[2],d=0,p=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&p.push(r[c][0]),r[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(o=!1)}o&&(a.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={app:0},a=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/novosibirsk-city-transport/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01a6":function(t,e,n){},"0364":function(t,e,n){"use strict";n("9ee7")},"0532":function(t,e,n){},"0df5":function(t,e,n){},"112e":function(t,e,n){"use strict";n("9a2d")},1945:function(t,e,n){},"1f9b":function(t,e,n){"use strict";n("b3cd")},2392:function(t,e,n){"use strict";n("fd31")},3263:function(t,e,n){"use strict";n("544b")},"3b80":function(t,e,n){},"3d02":function(t,e,n){"use strict";n("0532")},4512:function(t,e,n){"use strict";n("1945")},"507e":function(t,e,n){"use strict";n("0df5")},"51e7":function(t,e,n){"use strict";n("6d0f")},"544b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],c=n("5530"),i=n("2f62"),s={name:"App",mounted:function(){this.UPDATE_VEHICLES_LOOP(),this.UPDATE_FORECAST_LOOP()},methods:Object(c["a"])(Object(c["a"])({},Object(i["b"])("routes",["UPDATE_VEHICLES_LOOP"])),Object(i["b"])("forecast",["UPDATE_FORECAST_LOOP"]))},u=s,l=(n("5c0b"),n("2877")),d=Object(l["a"])(u,r,a,!1,null,null,null),p=d.exports,f=n("9483");Object(f["a"])("".concat("/novosibirsk-city-transport/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var h=n("1da1"),v=n("b85c"),m=n("3835"),b=(n("96cf"),n("4fad"),n("a434"),n("d3b7"),n("159b"),n("99af"),n("c740"),n("7db0"),n("9558")),_=n("d4ec"),y=n("bee2"),O=n("262e"),E=n("2caf"),g=(n("4e82"),n("d81d"),n("b0c0"),n("a9e3"),n("4de4"),n("ac1f"),n("1276"),n("5319"),n("466d"),Object(y["a"])((function t(){if(Object(_["a"])(this,t),t._instance)return t._instance;t._instance=this})));function T(t){for(var e={},n=0,o=Object.entries(t);n<o.length;n++){var r=Object(m["a"])(o[n],2),a=r[0],c=r[1];e[c]=a}return Object.assign({},t,e)}n("a630"),n("3ca3"),n("2ca0");function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=window.getComputedStyle(e),o=document.createElement("span"),r=Array.from(n).filter((function(t){return t.startsWith("font")})).reduce((function(t,e){return t[e]=n.getPropertyValue(e),t}),{});Object.assign(o.style,r,{top:"-100000rem",left:"-100000rem",position:"absolute",visibility:"hidden"}),o.appendChild(document.createTextNode(t)),document.body.appendChild(o);var a=o.offsetWidth;return document.body.removeChild(o),a}var R=T({1:"bus",8:"minibus",2:"trolleybus",3:"tram"}),w=T({W:"two-way",A:"forward",B:"backward"}),C=n("ade3"),x=n("bc3a"),S=new x["Axios"]({baseURL:"https://map.nskgortrans.ru",transformResponse:[function(t){try{return JSON.parse(t)}catch(e){return t}}]}),I=Object(y["a"])((function t(){Object(_["a"])(this,t)}));function L(t){var e=t.route,n=t.label,o=t.direction,r=t.type;return"".concat(R[r],"-").concat(e,"-").concat(w[o],"-").concat(n)}Object(C["a"])(I,"api",S);var P=function(t){Object(O["a"])(n,t);var e=Object(E["a"])(n);function n(){return Object(_["a"])(this,n),e.apply(this,arguments)}return Object(y["a"])(n,null,[{key:"getRoutesList",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(){var e,n,o,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.get("listmarsh.php",{params:{r:!0}});case 3:e=t.sent,n=e.data,o=[],r=Object(v["a"])(n);try{for(c=function(){var t=a.value,e=t.type,n=t.ways;o=o.concat(n.map((function(t){var n=t.marsh,o=t.name,r=t.stopb,a=t.stope,c=R[e+1];return{type:c,route:n,label:o,stationA:r,stationB:a}})))},r.s();!(a=r.n()).done;)c()}catch(i){r.e(i)}finally{r.f()}return t.abrupt("return",o.sort((function(t,e){var n=["bus","minibus","trolleybus","tram"];return n.indexOf(t.type)-n.indexOf(e.type)})));case 11:throw t.prev=11,t.t0=t["catch"](0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getActiveRoute",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){var n,o,r,a,c,i,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.get("trasses.php",{params:{r:L(e)}});case 3:return c=t.sent,i=c.data,s=null!==(n=null===i||void 0===i||null===(o=i.trasses)||void 0===o||null===(r=o[0])||void 0===r||null===(a=r.r)||void 0===a?void 0:a[0])&&void 0!==n?n:{},u=s.u,u.forEach((function(t,e,n){var o=t.len,r=t.n;o&&delete n[e].len,r&&(n[e].label=r,delete n[e].n)})),t.abrupt("return",u);case 10:throw t.prev=10,t.t0=t["catch"](0),t.t0;case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getActiveRouteVehicles",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){var n,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.get("markers.php",{params:{r:L(e)}});case 3:return r=t.sent,a=r.data,t.abrupt("return",null!==(n=null===a||void 0===a||null===(o=a.markers)||void 0===o?void 0:o.map((function(t){var e=t.lat,n=t.lng,o=t.graph,r=t.speed,a=t.azimuth,c=t.time_nav,i=t.ramp,s=t.rasp,u=t.direction,l=t.segment_order,d=Boolean(Number(i)),p=w[u],f=s.replace(/-/g,"").replace(/\+/g," ").split("|").filter(Boolean).reduce((function(t,e){var n=e.match(Object(b["a"])(/((\d{2}:\d{2}) )?([\S ]+)/,{time:2,label:3}));return t.push(n.groups),t}),[]);return{lat:e,lng:n,ramp:d,time:c,graph:o,speed:r,azimuth:a,schedule:f,direction:p,segmentOrder:l}})))&&void 0!==n?n:[]);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(I),A=function(t){Object(O["a"])(n,t);var e=Object(E["a"])(n);function n(){var t;return Object(_["a"])(this,n),t=e.call(this),null==t.loops&&(t.loops={}),t}return Object(y["a"])(n,[{key:"create",value:function(t,e,n){null==this.loops[t]&&(this.loops[t]=setInterval(e,n))}},{key:"destroy",value:function(t){clearInterval(this.loops[t])}},{key:"destroyAll",value:function(){var t,e=Object(v["a"])(this.loops);try{for(e.s();!(t=e.n()).done;){var n=t.value;clearInterval(n)}}catch(o){e.e(o)}finally{e.f()}}}]),n}(g),D={namespaced:!0,state:{routes:void 0,selectedRoutes:[],selectedRoutesData:{}},mutations:{SET_ROUTES:function(t,e){t.routes=e},ADD_SELECTED_ROUTE:function(t,e){t.selectedRoutes.push(e)},UPDATE_SELECTED_ROUTE:function(t,e){for(var n=e.index,r=e.route,a=0,c=Object.entries(r);a<c.length;a++){var i=Object(m["a"])(c[a],2),s=i[0],u=i[1];o["a"].set(t.selectedRoutes[n],s,u)}},REMOVE_SELECTED_ROUTE:function(t,e){t.selectedRoutes.splice(e,1)},UPDATE_SELECTED_ROUTE_DATA:function(t,e){var n=e.index,r=e.route;null==t.selectedRoutesData[n]&&o["a"].set(t.selectedRoutesData,n,{});for(var a=0,c=Object.entries(r);a<c.length;a++){var i=Object(m["a"])(c[a],2),s=i[0],u=i[1];o["a"].set(t.selectedRoutesData[n],s,u)}},REMOVE_SELECTED_ROUTE_DATA:function(t,e){o["a"].delete(t.selectedRoutesData,e)}},actions:{UPDATE_VEHICLES_LOOP:function(t){var e=t.state,n=t.dispatch,o=new A;o.create("vehicles",(function(){var t,o=Object(v["a"])(e.selectedRoutes);try{for(o.s();!(t=o.n()).done;){var r=t.value;n("GET_ROUTE_VEHICLES",r.routeId)}}catch(a){o.e(a)}finally{o.f()}}),1e4)},GET_ROUTES:function(t){return Object(h["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,P.getRoutesList();case 3:o=e.sent,o.forEach((function(t,e,n){n[e]=Object(c["a"])({get id(){return"".concat(t.type,"-").concat(t.label,"-").concat(t.route)}},t)})),n("SET_ROUTES",o);case 6:case"end":return e.stop()}}),e)})))()},ADD_SELECTED_ROUTE:function(t,e){return Object(h["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.commit,r=t.dispatch,n.t0=o,n.t1={get routeId(){return e},direction:"two-way"},(0,n.t0)("ADD_SELECTED_ROUTE",n.t1),n.next=6,r("GET_ROUTE_POINTS",e);case 6:case"end":return n.stop()}}),n)})))()},UPDATE_SELECTED_ROUTE:function(t,e){return Object(h["a"])(regeneratorRuntime.mark((function n(){var o,r,a,c,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.state,r=t.commit,a=t.dispatch,c=e.routeId,i=e.route,s=o.selectedRoutes.findIndex((function(t){return t.routeId===c})),s+1&&r("UPDATE_SELECTED_ROUTE",{index:s,route:i}),n.next=6,a("GET_ROUTE_POINTS",c);case 6:case"end":return n.stop()}}),n)})))()},REMOVE_SELECTED_ROUTE:function(t,e){var n=t.state,o=t.commit,r=n.selectedRoutes.findIndex((function(t){return t.routeId===e}));r+1&&o("REMOVE_SELECTED_ROUTE",r),o("REMOVE_SELECTED_ROUTE_DATA",e)},GET_ROUTE_POINTS:function(t,e){return Object(h["a"])(regeneratorRuntime.mark((function n(){var o,r,a,c,i,s,u,l,d,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.commit,r=t.dispatch,a=t.getters,c=a.getSelectedRouteById(e),i=c.direction,s=a.getRouteById(e),u=s.type,l=s.route,d=s.label,n.next=5,P.getActiveRoute({type:u,route:l,label:d,direction:i});case 5:return p=n.sent,o("UPDATE_SELECTED_ROUTE_DATA",{index:e,route:{points:p}}),n.next=9,r("GET_ROUTE_VEHICLES",e);case 9:case"end":return n.stop()}}),n)})))()},GET_ROUTE_VEHICLES:function(t,e){return Object(h["a"])(regeneratorRuntime.mark((function n(){var o,r,a,c,i,s,u,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.commit,r=t.getters,a=r.getSelectedRouteById(e),c=a.direction,i=r.getRouteById(e),s=i.type,u=i.route,l=i.label,n.next=5,P.getActiveRouteVehicles({type:s,route:u,label:l,direction:c});case 5:d=n.sent,o("UPDATE_SELECTED_ROUTE_DATA",{index:e,route:{vehicles:d}});case 7:case"end":return n.stop()}}),n)})))()}},getters:{isRouteSelected:function(t){return function(e){return t.selectedRoutes.find((function(t){return t.routeId===e}))}},getRouteById:function(t){return function(e){return t.routes.find((function(t){return t.id===e}))}},getSelectedRouteById:function(t){return function(e){return t.selectedRoutes.find((function(t){return t.routeId===e}))}}}},k=function(t){Object(O["a"])(n,t);var e=Object(E["a"])(n);function n(){return Object(_["a"])(this,n),e.apply(this,arguments)}return Object(y["a"])(n,null,[{key:"getStationForecast",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.get("forecast.php",{params:{id:e,type:"platform"}});case 3:return n=t.sent,o=n.data,t.abrupt("return",o.routes.map((function(t){var e=t.markers,n=t.marsh,o=t.title,r=t.typetr,a=t.stop_end,c=t.direction;return{route:n,label:o,stationEnd:a,type:R[r],direction:w[c],forecastTime:e.reduce((function(t,e){var n=e.time;return t>0&&t<=n?t:n}),1/0)}})));case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(I),U={namespaced:!0,state:{stationId:void 0,forecast:void 0},mutations:{UPDATE_STATION_ID:function(t,e){t.stationId=e},UPDATE_FORECAST:function(t,e){t.forecast=e}},actions:{UPDATE_FORECAST_LOOP:function(t){var e=t.state,n=t.dispatch,o=new A;o.create("forecast",(function(){e.stationId&&n("GET_FORECAST")}),1e4)},SET_ACTIVE_STATION_ID:function(t,e){var n=t.commit,o=t.dispatch;n("UPDATE_STATION_ID",e),e&&o("GET_FORECAST")},GET_FORECAST:function(t){return Object(h["a"])(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,o=t.commit,e.next=3,k.getStationForecast(n.stationId);case 3:r=e.sent,r.forEach((function(t,e,n){n[e]=Object(c["a"])({get id(){return"".concat(t.type,"-").concat(t.label,"-").concat(t.route)}},t)})),o("UPDATE_FORECAST",r);case 6:case"end":return e.stop()}}),e)})))()}},getters:{}},M=[54.99997630952814,82.83210754394533],V=10,N=18,$=11,z=[[55.452556,81.874842],[54.531149,83.690061]],B={namespaced:!0,state:{zoom:$,center:M,currentPosition:void 0},mutations:{UPDATE_UI:function(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=Object(m["a"])(r[n],2),c=a[0],i=a[1];o["a"].set(t,c,i)}}},actions:{UPDATE_UI:function(t,e){var n=t.commit;n("UPDATE_UI",e)}},getters:{minZoom:function(){return V},maxZoom:function(){return N},maxBounds:function(){return z}}};o["a"].use(i["a"]);var Z,F,H=new i["a"].Store({state:{},mutations:{},actions:{},getters:{},modules:{routes:D,forecast:U,mapControls:B}}),G=n("8c4f"),W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map"},[n("MapLayer"),n("UILayer")],1)},q=[],J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui",class:{"user-scroll-ui":t.isUserScrollUI},on:{touchstart:t.touchstart,touchend:t.touchend}},[n("MenuNavigation",{ref:"nav"})],1)},K=[],Q=(n("caad"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-wrapper"},[n("SelectedRoutes"),n("nav",{staticClass:"nav"},[n("span",{staticClass:"logo"},[n("NCTLogo")],1),n("MenuByNumberSection",{staticClass:"section"})],1)],1)}),X=[],Y=function(t,e){var n=e._c;return"default"===e.props.type?n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2","clip-rule":"evenodd",viewBox:"0 0 1700 600"}},[n("path",{attrs:{"fill-rule":"nonzero",d:"M300 150v33H183v150h234v-33h33v133h-17v17c0 9-7 17-16 17h-17c-9 0-17-8-17-17v-17H217v17c0 9-8 17-17 17h-17c-9 0-16-8-16-17v-17h-17V300h-17v-67h17v-50c0-18 15-33 33-33h117Zm-50 217h-67v33h67v-33Zm167 0h-67v33h67v-33Zm-9-250c41 0 75 34 75 75s-34 75-75 75-75-34-75-75 34-75 75-75Zm0 86c-8 0-15 3-21 8l-2 2 23 23 24-23c-6-7-15-10-24-10Zm0-45c-19 0-38 7-52 20l-3 3 16 16a55 55 0 0 1 76-3l3 3 15-16a78 78 0 0 0-55-23Z"}}),n("g",{attrs:{"font-family":"system-ui","font-weight":"900"}},[n("text",{attrs:{x:"400",y:"444","font-size":"131",transform:"translate(220 -133) scale(.93957)"}},[e._v("Новосибирский")]),n("text",{attrs:{x:"400",y:"554","font-size":"96",transform:"translate(220 -133) scale(.93957)"}},[e._v("г"),n("tspan",{attrs:{x:"444",y:"554"}},[e._v("о")]),e._v("родск"),n("tspan",{attrs:{x:"809",y:"554"}},[e._v("о")]),e._v("й транспор"),n("tspan",{attrs:{x:"1416",y:"554"}},[e._v("т")])])])]):"icon"===e.props.type?n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2","clip-rule":"evenodd",viewBox:"0 0 600 600"}},[n("path",{attrs:{"fill-rule":"nonzero",d:"M300 150v33H183v150h234v-33h33v133h-17v17c0 9-7 17-16 17h-17c-9 0-17-8-17-17v-17H217v17c0 9-8 17-17 17h-17c-9 0-16-8-16-17v-17h-17V300h-17v-67h17v-50c0-18 15-33 33-33h117Zm-50 217h-67v33h67v-33Zm167 0h-67v33h67v-33Zm-9-250c41 0 75 34 75 75s-34 75-75 75-75-34-75-75 34-75 75-75Zm0 86c-8 0-15 3-21 8l-2 2 23 23 24-23c-6-7-15-10-24-10Zm0-45c-19 0-38 7-52 20l-3 3 16 16a55 55 0 0 1 76-3l3 3 15-16a78 78 0 0 0-55-23Z"}})]):"text"===e.props.type?n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2","clip-rule":"evenodd",viewBox:"0 0 1200 600"}},[n("g",{attrs:{"font-family":"system-ui","font-weight":"900"}},[n("text",{attrs:{x:"400",y:"444","font-size":"131",transform:"translate(-280 -133) scale(.93957)"}},[e._v("Новосибирский")]),n("text",{attrs:{x:"400",y:"554","font-size":"96",transform:"translate(-280 -133) scale(.93957)"}},[e._v("г"),n("tspan",{attrs:{x:"444",y:"554"}},[e._v("о")]),e._v("родск"),n("tspan",{attrs:{x:"809",y:"554"}},[e._v("о")]),e._v("й транспор"),n("tspan",{attrs:{x:"1416",y:"554"}},[e._v("т")])])])]):e._e()},tt=[],et={name:"NCTLogo",props:{type:{type:String,default:"default",validate:function(t){return["default","icon","text"].includes(t)}}}},nt=et,ot=Object(l["a"])(nt,Y,tt,!0,null,"e978093e",null),rt=ot.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("form",{staticClass:"search-form",on:{submit:function(t){t.preventDefault()}}},[n("NInput",{staticClass:"number",attrs:{type:"number",min:"1",max:"9999",placeholder:"Номер маршрута"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}}),n("NSegment",{staticClass:"type",attrs:{segments:t.segments},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})],1),n("SearchRoutes",{attrs:{routes:t.filteredRoutes}})],1)},ct=[],it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,viewBox:"0 0 16 16","aria-labelledby":t.iconName}},[n("title",{attrs:{id:t.iconName}},[t._v(" "+t._s(t.iconName)+" ")]),n("g",{attrs:{fill:t.iconColor}},[t._t("default")],2)])},st=[],ut={name:"NIcon",props:{iconName:{type:String,required:!0},width:{type:[Number,String],default:16},height:{type:[Number,String],default:16},iconColor:{type:String,default:"currentColor"}}},lt=ut,dt=Object(l["a"])(lt,it,st,!1,null,"49dbdefc",null),pt=dt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}})},ht=[],vt={name:"NInput",props:{value:{type:[String,Number],default:""}},computed:{input:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},mt=vt,bt=(n("112e"),Object(l["a"])(mt,ft,ht,!1,null,"e4f1b6fc",null)),_t=bt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"segments"},t._l(t.segments,(function(e,o){return n("li",{key:o,staticClass:"segment",class:{active:e.value===t.active}},[t._t("segment",(function(){return[n("label",{staticClass:"label"},["string"===typeof e.label?[t._v(" "+t._s(e.label)+" ")]:"object"===typeof e.label?[n("VNode",{attrs:{node:e.label}})]:t._e(),n("input",{directives:[{name:"model",rawName:"v-model",value:t.active,expression:"active"}],staticClass:"input",attrs:{type:"radio",name:"segment"},domProps:{value:e.value,checked:t._q(t.active,e.value)},on:{change:function(n){t.active=e.value}}})],2)]}),{segment:e})],2)})),0)},Ot=[],Et=n("477e"),gt={name:"NSegment",components:{VNode:Et["a"]},props:{value:{type:String,default:void 0},segments:{type:Array,required:!0}},data:function(){var t,e,n=this.value||(null===(t=this.segments)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.value);return{active:n}},watch:{active:function(t){this.$emit("input",t)}}},Tt=gt,jt=(n("7a3a"),Object(l["a"])(Tt,yt,Ot,!1,null,"4e971f78",null)),Rt=jt.exports,wt=function(t,e){var n=e._c;return n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 13.616c0 .212-.188.384-.4.384h-1.332a.5.5 0 0 1-.416-.223L10 12.5H6l-.852 1.277a.5.5 0 0 1-.416.223H3.4c-.212 0-.4-.172-.4-.384V7l-.927-.426A.25.25 0 0 1 2 6.396V4.75C2 4 2.724 4 3 4v-.21c0-.649.352-1.225 1-1.426C4.808 2.114 5.843 2 8 2c2.156 0 3.192.114 4 .364.648.201 1 .777 1 1.427V4c.276 0 1 0 1 .75v1.648a.25.25 0 0 1-.071.175L13 7.01v6.605zM8 3.5c-1.988 0-3.235.14-3.74.417a.5.5 0 0 0-.26.438v3.27c0 .207.15.375.333.375h7.334c.184 0 .333-.168.333-.375V4.251c-.001-.501-1.335-.751-4-.751zm3 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-6 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}})},Ct=[],xt={name:"BusIcon"},St=xt,It=Object(l["a"])(St,wt,Ct,!0,null,null,null),Lt=It.exports,Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("path",{attrs:{d:"M5.576 2h4.848c.318 0 .576.18.576.4v.2c0 .22-.258.4-.576.4H5.576C5.258 3 5 2.82 5 2.6v-.2c0-.22.258-.4.576-.4zM4.019 4.317A25.277 25.277 0 0 1 8 4c1.327 0 2.654.106 3.981.317.586.093 1.019.618 1.019 1.236V12c0 1.105-.86 2-1.92 2H4.92C3.86 14 3 13.105 3 12V5.553c0-.618.433-1.143 1.019-1.236zM5.395 10h5.21a.731.731 0 0 0 .715-.668l.293-2.782c.072-.686-.403-1.303-1.062-1.379a18.873 18.873 0 0 0-5.048-.005c-.661.045-1.163.639-1.12 1.328 0 .019.002.037.004.056l.293 2.782c.04.38.348.668.715.668zM6 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}})},At=[],Dt={name:"TramIcon"},kt=Dt,Ut=Object(l["a"])(kt,Pt,At,!1,null,"61433f34",null),Mt=Ut.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.511 14a.628.628 0 0 1-.559-.332L10.5 12.5h-5l-.452 1.168a.628.628 0 0 1-.56.332h-.863A.613.613 0 0 1 3 13.4V3.45c0-.506.37-.942.887-1.044C5.258 2.136 6.63 2 8 2c1.37 0 2.742.135 4.113.406.516.102.887.538.887 1.045V13.4c0 .331-.28.6-.625.6h-.864zM8 5.5c-1.646 0-2.805.064-3.476.192-.306.059-.524.296-.524.57v2.155c0 .322.298.583.667.583h6.666c.368 0 .667-.261.667-.583V6.262c0-.274-.218-.511-.524-.57C10.805 5.564 9.646 5.5 8 5.5zm3 6.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-6 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4.5-8v1h1V4h-1zm-1-1v1h1V3h-1zm-1 1v1h1V4h-1zm-1-1v1h1V3h-1zm-1 1v1h1V4h-1z"}})},Nt=[],$t={name:"MinibusIcon"},zt=$t,Bt=Object(l["a"])(zt,Vt,Nt,!1,null,null,null),Zt=Bt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.141 4.312c.5.099.859.537.859 1.046V13.4a.6.6 0 0 1-.6.6h-.911a.597.597 0 0 1-.532-.32L10.5 12.5h-5l-.457 1.18a.597.597 0 0 1-.532.32h-.91a.6.6 0 0 1-.6-.6V5.358c-.001-.51.359-.947.858-1.046.412-.082.825-.152 1.237-.21L5.93 2.1c.042-.12.156-.1.283-.1h.237c.166 0 .3.034.3.2v1.738a20.866 20.866 0 0 1 2.5 0V2.2c0-.166.134-.2.3-.2h.237c.127 0 .241-.02.283.1l.834 2.002c.412.058.825.128 1.237.21zM8 5c-1.661 0-2.826.07-3.494.212A.634.634 0 0 0 4 5.83v2.538c0 .35.287.632.64.632h6.72c.354 0 .64-.283.64-.632V5.83a.634.634 0 0 0-.506-.618C10.826 5.071 9.662 5 8 5zm3 6.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-6 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}})},Ht=[],Gt={name:"TrolleybusIcon"},Wt=Gt,qt=Object(l["a"])(Wt,Ft,Ht,!1,null,"410d46ec",null),Jt=qt.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.routes?n("ul",{staticClass:"search-result"},t._l(t.routes,(function(e){return n("li",{key:t.key(e),staticClass:"route"},[n("SearchRoute",{attrs:{route:e}})],1)})),0):t._e()},Qt=[],Xt=function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("article",{staticClass:"route"},[o("div",{staticClass:"icon icon-left",class:(t={},t[e.route.type]=!0,t)},[o("NIcon",{attrs:{"icon-name":e.routeTypeLabel+" №"+e.route.label,width:"24",height:"24","icon-color":"#ffffff"}},[o(e.routeIcon,{tag:"component"})],1)],1),o("h1",{staticClass:"title",attrs:{tabindex:"1"}},[e._v(" "+e._s(e.routeTypeLabel)+" №"+e._s(e.route.label)+" ")]),o("div",{staticClass:"station"},[o("h3",{staticClass:"station-start",attrs:{tabindex:"1"}},[e._v(" "+e._s(e.route.stationA)+" ")]),o("h3",{staticClass:"station-end",attrs:{tabindex:"1"}},[e._v(" "+e._s(e.route.stationB)+" ")])]),o("button",{staticClass:"icon button icon-right",class:{selected:e.selected},attrs:{tabindex:"1"},on:{click:e.selectRoute}},[e.selected?o("span",{staticClass:"material-icons-round"},[e._v(" close ")]):o("span",{staticClass:"material-icons-round"},[e._v(" add ")])])])},Yt=[],te={name:"BaseRoute",components:{NIcon:pt,BusIcon:Lt,MinibusIcon:Zt,TrolleybusIcon:Jt,TramIcon:Mt},props:{route:{type:Object,required:!0}},computed:{routeIcon:function(){return{bus:Lt,minibus:Zt,trolleybus:Jt,tram:Mt}[this.route.type]},routeTypeLabel:function(){return{bus:"Автобус",minibus:"Маршрутка",trolleybus:"Троллейбус",tram:"Трамвай"}[this.route.type]}}},ee=te,ne=Object(l["a"])(ee,Z,F,!1,null,null,null),oe=ne.exports,re={name:"SearchRoute",extends:oe,computed:Object(c["a"])(Object(c["a"])({},Object(i["c"])("routes",["isRouteSelected"])),{},{selected:function(){return this.isRouteSelected(this.route.id)}}),methods:Object(c["a"])(Object(c["a"])({},Object(i["b"])("routes",["ADD_SELECTED_ROUTE","REMOVE_SELECTED_ROUTE"])),{},{selectRoute:function(){this.selected?this.REMOVE_SELECTED_ROUTE(this.route.id):this.ADD_SELECTED_ROUTE(this.route.id)}})},ae=re,ce=(n("3263"),Object(l["a"])(ae,Xt,Yt,!1,null,"140f2bee",null)),ie=ce.exports,se={name:"SearchRoutes",components:{SearchRoute:ie},props:{routes:{type:Array,default:void 0}},methods:{key:function(t){return"".concat(t.type,"-").concat(t.route)}}},ue=se,le=(n("c3d6"),Object(l["a"])(ue,Kt,Qt,!1,null,"48d2f83c",null)),de=le.exports,pe={name:"MenuByNumberSection",components:{SearchRoutes:de,NSegment:Rt,NInput:_t},data:function(){return{number:void 0,active:"all"}},computed:Object(c["a"])(Object(c["a"])({},Object(i["d"])("routes",["routes"])),{},{segments:function(){var t=this.$createElement;return[{label:"Все",value:"all"},{label:t(pt,{attrs:{"icon-name":"bus",width:"24",height:"24"}},[t(Lt)]),value:"bus"},{label:t(pt,{attrs:{"icon-name":"minibus",width:"24",height:"24"}},[t(Zt)]),value:"minibus"},{label:t(pt,{attrs:{"icon-name":"trolleybus",width:"24",height:"24"}},[t(Jt)]),value:"trolleybus"},{label:t(pt,{attrs:{"icon-name":"tram",width:"24",height:"24"}},[t(Mt)]),value:"tram"}]},filteredRoutes:function(){var t,e=this;return null===(t=this.routes)||void 0===t?void 0:t.filter((function(t){return(!e.number||t.label.includes(e.number))&&(e.active===t.type||"all"===e.active)}))}})},fe=pe,he=(n("2392"),Object(l["a"])(fe,at,ct,!1,null,"ca661f2e",null)),ve=he.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"selectedRoutesWrapper",staticClass:"selected-routes-wrapper"},[n("ul",{staticClass:"selected-routes"},t._l(t.selectedRoutes,(function(e){return n("li",{key:e.routeId},[n("SelectedRoute",{attrs:{route:t.getRouteById(e.routeId)}})],1)})),0)])},be=[],_e=function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"selected-route"},[o("div",{staticClass:"icon",class:(t={},t[e.route.type]=!0,t)},[o("NIcon",{attrs:{"icon-name":e.routeTypeLabel+" №"+e.route.label,width:"18",height:"18","icon-color":"#ffffff"}},[o(e.routeIcon,{tag:"component"})],1)],1),o("div",{staticClass:"content"},[e._v(" "+e._s(e.route.label)+" ")]),o("SelectedRouteDirection",{attrs:{route:e.route}}),o("button",{staticClass:"icon button close",on:{click:function(t){return e.removeRoute(e.route.id)}}},[o("span",{staticClass:"material-icons-round"},[e._v(" close ")])])],1)},ye=[],Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.parent?n("NPopup",{attrs:{active:t.showPopup,"append-to-element":t.parent},on:{"update:active":function(e){t.showPopup=e}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[n("div",{staticClass:"station"},[n("div",{staticClass:"direction"},[n("button",{staticClass:"button icon"},[n("span",{staticClass:"material-icons-round",on:{click:t.changeDirection}},[t._v(" "+t._s(t.directionIcon)+" ")])])]),n("h3",{staticClass:"station-start",attrs:{tabindex:"1"}},[t._v(" "+t._s(t.route.stationA)+" ")]),n("h3",{staticClass:"station-end",attrs:{tabindex:"1"}},[t._v(" "+t._s(t.route.stationB)+" ")])])]},proxy:!0}],null,!1,1248016200)},[n("button",{staticClass:"icon button",on:{click:function(e){t.showPopup=!t.showPopup}}},[n("span",{staticClass:"material-icons-round"},[t._v(" "+t._s(t.directionIcon)+" ")])])]):t._e()},Ee=[],ge=(n("c1f9"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tag,{tag:"component",attrs:{"aria-describedby":"tooltip"}},[n("transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],ref:"tooltip",staticClass:"tooltip-wrapper",attrs:{role:"tooltip"}},[n("div",{staticClass:"tooltip"},[t._t("tooltip")],2),n("div",{ref:"arrow",staticClass:"arrow"})])]),t._t("default")],2)}),Te=[],je=n("e20a"),Re=n("b8ca"),we=["mousedown","touchstart"],Ce={name:"NPopup",props:{tag:{type:String,default:"div"},active:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},appendToElement:{type:HTMLDivElement,default:void 0},options:{type:Object,default:function(){}}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.$refs.tooltip,n=t.$slots.default[0].elm;t.cleanup=Object(je["a"])(n,e,t.update),t.tooltip=e,t.appendToBody?document.body.appendChild(t.tooltip):t.appendToElement&&t.appendToElement.appendChild(t.tooltip),we.forEach((function(e){document.addEventListener(e,t.click)}))}))},methods:{update:function(){var t=this.$refs.tooltip,e=this.$refs.arrow,n=this.$slots.default[0].elm,o=8;Object(je["b"])(n,t,{placement:"bottom",middleware:[Object(Re["e"])(0),Object(Re["g"])({padding:o}),Object(Re["c"])(),Object(Re["a"])({element:e,padding:o}),Object(Re["d"])()]}).then((function(n){var o=n.x,r=n.y,a=n.placement,c=n.middlewareData,i=c.hide.referenceHidden,s={top:"bottom",right:"left",bottom:"top",left:"right"}[a.split("-")[0]];Object.assign(t.style,{top:"6px",left:"-1px",visibility:i?"hidden":"visible",transform:"translate3d(".concat(Math.round(o),"px, ").concat(Math.round(r),"px, 0)")});var u=c.arrow,l=u.x,d=u.y;Object.assign(e.style,Object(C["a"])({transform:"translate3d(".concat(Math.round(l)||0,"px, ").concat(Math.round(d)||0,"px, 0) rotate(45deg)")},s,"-4px"))}))},click:function(t){var e=this.$refs.tooltip,n=this.$slots.default[0].elm;!this.active||t.path.includes(e)||t.path.includes(n)||this.$emit("update:active",!1)}},beforeDestroy:function(){var t=this;this.cleanup(),this.appendToBody?document.body.removeChild(this.tooltip):this.appendToElement&&this.appendToElement.removeChild(this.tooltip),we.forEach((function(e){document.removeEventListener(e,t.click)}))}},xe=Ce,Se=(n("7779"),Object(l["a"])(xe,ge,Te,!1,null,"4beeaf66",null)),Ie=Se.exports,Le={name:"SelectedRouteDirection",components:{NPopup:Ie},props:{route:{type:Object,required:!0}},mounted:function(){this.parent=this.parentRefs.selectedRoutesWrapper},data:function(){return{parent:void 0,showPopup:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(i["c"])("routes",["getSelectedRouteById"])),{},{selectedRoute:function(){return this.getSelectedRouteById(this.route.id)},directions:function(){return["backward","two-way","forward"]},directionsIcons:function(){var t=this,e=["arrow_upward","swap_vert","arrow_downward"];return Object.fromEntries(e.map((function(n,o){return[t.directions[o],e[o]]})))},directionIcon:function(){return this.directionsIcons[this.selectedRoute.direction]}}),methods:Object(c["a"])(Object(c["a"])({},Object(i["b"])("routes",["UPDATE_SELECTED_ROUTE"])),{},{changeDirection:function(){var t=this.selectedRoute.direction;switch(t){case"backward":t="two-way";break;case"two-way":t="forward";break;case"forward":t="backward";break}this.UPDATE_SELECTED_ROUTE({routeId:this.route.id,route:{direction:t}})}}),inject:{parentRefs:{from:"parentRefs"}}},Pe=Le,Ae=(n("0364"),Object(l["a"])(Pe,Oe,Ee,!1,null,"a1e8e5c4",null)),De=Ae.exports,ke={name:"SelectedRoute",extends:oe,components:{SelectedRouteDirection:De},methods:Object(c["a"])(Object(c["a"])({},Object(i["b"])("routes",["REMOVE_SELECTED_ROUTE"])),{},{removeRoute:function(t){this.REMOVE_SELECTED_ROUTE(t)}})},Ue=ke,Me=(n("507e"),Object(l["a"])(Ue,_e,ye,!1,null,"65ea8998",null)),Ve=Me.exports,Ne={name:"SelectedRoutes",components:{SelectedRoute:Ve},computed:Object(c["a"])(Object(c["a"])({},Object(i["d"])("routes",["selectedRoutes"])),Object(i["c"])("routes",["getRouteById"])),provide:function(){return{parentRefs:this.$refs}}},$e=Ne,ze=(n("51e7"),Object(l["a"])($e,me,be,!1,null,"d64c6ae6",null)),Be=ze.exports,Ze={name:"MenuNavigation",components:{SelectedRoutes:Be,NCTLogo:rt,MenuByNumberSection:ve},created:function(){this.GET_ROUTES()},methods:Object(c["a"])({},Object(i["b"])("routes",["GET_ROUTES"]))},Fe=Ze,He=(n("e3d9"),Object(l["a"])(Fe,Q,X,!1,null,"26de27d2",null)),Ge=He.exports,We={name:"UILayer",components:{MenuNavigation:Ge},data:function(){return{isUserScrollUI:!1}},methods:{touchstart:function(t){this.isUserScrollUI=t.composedPath().includes(this.$refs.nav.$el)},touchend:function(){this.isUserScrollUI=!1}}},qe=We,Je=(n("4512"),Object(l["a"])(qe,J,K,!1,null,"10d0f9fa",null)),Ke=Je.exports,Qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("LMap",t._b({ref:"map",staticClass:"map",attrs:{zoom:t.zoom,center:t.center},on:{"update:zoom":function(e){t.zoom=e},"update:center":function(e){t.center=e},ready:t.mapReady}},"LMap",t.mapAttrs,!1),[n("LTileLayer",{attrs:{url:t.mapTileURL}}),n("LControlZoom",t._b({},"LControlZoom",t.mapZoomAttrs,!1)),n("LControlAttribution",{attrs:{prefix:!1}}),n("MapLayerRouteLines")],1)],1)},Xe=[],Ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.paths,(function(t,e){var o=t.path,r=t.route,a=t.color;return[n("LPolyline",{key:"route-"+r.id+"-"+e,attrs:{"lat-lngs":o,color:a}})]})),t._l(t.paths,(function(e){var o=e.route,r=e.stations;return[t._l(r,(function(e,r){return[n("LMarker",{key:"station-"+o.id+"-"+r,attrs:{"lat-lng":e.coords,icon:t.icon({route:o,item:e})},on:{click:function(n){return t.showStationPopup(e)}}})]}))]})),t._l(t.paths,(function(e){var o=e.route,r=e.stations,a=e.vehicles;return[t._l(a,(function(e,a){return[n("LMarker",{key:"vehicle-"+o.id+"-"+a,attrs:{"lat-lng":e.coords,icon:t.icon({route:o,item:e}),zIndexOffset:r.length},on:{click:function(n){return t.showVehiclePopup(e)}}})]}))]})),n("LFeatureGroup",{ref:"stationPopup"},[n("LPopup",[n("MapLayerStationPopup",{attrs:{station:t.station}})],1)],1),n("LFeatureGroup",{ref:"vehiclePopup"},[n("LPopup",[n("MapLayerVehiclePopup",{attrs:{vehicle:t.vehicle}})],1)],1)],2)},tn=[],en=n("15fd"),nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.vehicle?n("table",{key:t.vehicle.label,staticClass:"vehicle"},[n("caption",[t._v(t._s(t.vehicleTypeLabel)+" №"+t._s(t.vehicle.label))]),t._m(0),t._m(1),t.vehicle.schedule?n("tbody",{staticClass:"vehicle-body"},t._l(t.vehicle.schedule,(function(e,o){return n("tr",{key:o,staticClass:"vehicle-body-row"},[n("th",[t._v(" "+t._s(e.time)+" ")]),n("th",[n("div",{staticClass:"station-wrapper"},[n("div",{ref:"station",refInFor:!0,staticClass:"station"},[t._v(" "+t._s(e.label)+" ")])])])])})),0):t._e()]):t._e()},on=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("colgroup",[n("col",{staticClass:"time"}),n("col",{staticClass:"stations"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"vehicle-head"},[n("tr",{staticClass:"vehicle-head-row"},[n("th",[t._v("Время")]),n("th",[t._v("Остановка")])])])}],rn={name:"MapLayerVehiclePopup",props:{vehicle:{type:Object,default:function(){}}},computed:{vehicleTypeLabel:function(){return{bus:"Автобус",minibus:"Маршрутка",trolleybus:"Троллейбус",tram:"Трамвай"}[this.vehicle.type]}},watch:{vehicle:{deep:!0,handler:function(){var t=this;this.$nextTick((function(){var e,n,o=null!==(e=t.$refs.station)&&void 0!==e?e:[],r=Object(v["a"])(o);try{for(r.s();!(n=r.n()).done;){var a=n.value,c=j(a.innerText,a),i=Math.min(a.offsetWidth-c,0);a.style.setProperty("--size","".concat(i,"px")),a.style.setProperty("--time","".concat(Math.abs(i/8),"s"))}}catch(s){r.e(s)}finally{r.f()}}))}}}},an=rn,cn=(n("1f9b"),Object(l["a"])(an,nn,on,!1,null,"b64b474a",null)),sn=cn.exports,un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{"fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2","clip-rule":"evenodd"}},[n("path",{attrs:{d:"M4.5 14.7c-1 0-1.7-.8-1.7-1.7 0-1 .7-1.8 1.7-1.8s1.8.8 1.8 1.8-.8 1.7-1.8 1.7Z"}}),n("path",{attrs:{d:"M1 11.8V2.5h11c1.8 0 3 .6 3 1.7v8.2c0 .3-.3.6-.6.6h-7a3 3 0 0 0-5.6-1.2H1Zm12.2-4c0 .7.6 1.3 1.8 1.7V4.2h-1.2c-.3 0-.6.3-.6.6v3Zm-4.6 3.4c0 .3.2.6.6.6h2.3c.3 0 .6-.3.6-.6V4.8c0-.3-.3-.6-.6-.6H9.2c-.4 0-.6.3-.6.6v6.4ZM3.9 4.8v2.3c0 .4.3.6.6.6h1.8c.3 0 .5-.2.5-.6V4.8c0-.3-.2-.6-.5-.6H4.5c-.3 0-.6.3-.6.6ZM1 4.2v3.5h1.2c.3 0 .6-.2.6-.6V4.8c0-.3-.3-.6-.6-.6H1Z"}})])},ln=[],dn={name:"StationIcon"},pn=dn,fn=Object(l["a"])(pn,un,ln,!1,null,null,null),hn=fn.exports,vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.station?n("table",{key:t.station.label,staticClass:"station"},[n("caption",[t._v(t._s(t.station.label))]),t._m(0),t._m(1),t.sortedForecast?n("tbody",{staticClass:"station-body"},t._l(t.sortedForecast,(function(e,o){var r;return n("tr",{key:o,staticClass:"station-body-row"},[n("th",[n("div",{staticClass:"route",class:t.routeClass(e)},[n("div",{staticClass:"icon icon-left",class:(r={},r[e.type]=!0,r)},[n("NIcon",{attrs:{"icon-name":t.routeTypeLabel(e.type)+" №"+e.label,width:"16",height:"16","icon-color":"#ffffff"}},[n(t.routeIcon(e.type),{tag:"component"})],1)],1),t._v(" "+t._s(e.label)+" ")])]),n("th",[t._v(" "+t._s(e.forecastTime)+" мин ")]),n("th",[n("div",{staticClass:"direction-wrapper"},[n("div",{ref:"direction",refInFor:!0,staticClass:"direction"},[t._v(" "+t._s(e.stationEnd)+" ")])])])])})),0):t._e()]):t._e()},mn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("colgroup",[n("col",{staticClass:"route"}),n("col",{staticClass:"time"}),n("col",{staticClass:"direction"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"station-head"},[n("tr",{staticClass:"station-head-row"},[n("th"),n("th",[t._v("Время")]),n("th",[t._v("Направление")])])])}],bn={name:"MapLayerStationPopup",components:{NIcon:pt},props:{station:{type:Object,default:function(){}}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(i["d"])("forecast",["forecast"])),Object(i["c"])("routes",["isRouteSelected"])),{},{sortedForecast:function(){var t,e,n=this;return null===(t=this.forecast)||void 0===t||null===(e=t.filter((function(t){var e=t.id,o=t.forecastTime;return o>0&&(o<30||n.isRouteSelected(e))})))||void 0===e?void 0:e.sort((function(t,e){return t.forecastTime-e.forecastTime}))}}),methods:Object(c["a"])(Object(c["a"])({},Object(i["b"])("forecast",["SET_ACTIVE_STATION_ID"])),{},{routeClass:function(t){var e;return e={},Object(C["a"])(e,t.type,!0),Object(C["a"])(e,"active",this.isRouteSelected(t.id)),e},routeIcon:function(t){return{bus:Lt,minibus:Zt,trolleybus:Jt,tram:Mt}[t]},routeTypeLabel:function(t){return{bus:"Автобус",minibus:"Маршрутка",trolleybus:"Троллейбус",tram:"Трамвай"}[t]}}),watch:{station:{deep:!0,handler:function(t){this.SET_ACTIVE_STATION_ID(t.id)}},sortedForecast:function(){var t=this;this.$nextTick((function(){var e,n,o=null!==(e=t.$refs.direction)&&void 0!==e?e:[],r=Object(v["a"])(o);try{for(r.s();!(n=r.n()).done;){var a=n.value,c=j(a.innerText,a),i=Math.min(a.offsetWidth-c,0);a.style.setProperty("--size","".concat(i,"px")),a.style.setProperty("--time","".concat(Math.abs(i/8),"s"))}}catch(s){r.e(s)}finally{r.f()}}))}}},_n=bn,yn=(n("3d02"),Object(l["a"])(_n,vn,mn,!1,null,"5a53470f",null)),On=yn.exports,En=n("6ce4"),gn=n.n(En),Tn=n("e11e"),jn=n.n(Tn),Rn=n("f60f"),wn=n("4e2b"),Cn=n("635f"),xn=n("c5ca"),Sn=["lat","lng"],In={name:"MapLayerRouteLines",components:{MapLayerVehiclePopup:sn,LPopup:Rn["a"],LMarker:wn["a"],LPolyline:Cn["a"],LFeatureGroup:xn["a"],MapLayerStationPopup:On},mounted:function(){var t=this;this.stationPopup=this.$refs.stationPopup.mapObject,this.vehiclePopup=this.$refs.vehiclePopup.mapObject,this.stationPopup.addEventListener("popupclose",(function(e){t.SET_ACTIVE_STATION_ID(void 0)}))},data:function(){return{station:void 0,vehicle:void 0,stationPopup:void 0,vehiclePopup:void 0}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(i["d"])("routes",["selectedRoutes","selectedRoutesData"])),Object(i["c"])("routes",["getRouteById"])),{},{paths:function(){var t,e=this,n=[],o=Object(v["a"])(this.selectedRoutes);try{var r=function(){var o,r,a=t.value,i=e.getRouteById(a.routeId),s=null!==(o=e.selectedRoutesData[a.routeId])&&void 0!==o?o:{},u=s.points,l=void 0===u?[]:u,d=s.vehicles,p=void 0===d?[]:d,f=[],h=[],m=Object(v["a"])(l);try{for(m.s();!(r=m.n()).done;){var b=r.value,_=b.id,y=b.label,O=b.lat,E=b.lng;_&&h.push({id:_,label:y,type:"station",coords:[O,E]}),f.push([O,E])}}catch(g){m.e(g)}finally{m.f()}n.push({path:f,route:i,stations:h,color:gn.a["".concat(i.type,"Color")],vehicles:p.filter((function(t){var e=t.schedule;return e.length})).map((function(t){var e=t.lat,n=t.lng,o=Object(en["a"])(t,Sn);return Object(c["a"])(Object(c["a"])({},o),{},{type:i.type,label:i.label,coords:[e,n]})}))})};for(o.s();!(t=o.n()).done;)r()}catch(a){o.e(a)}finally{o.f()}return n}}),methods:Object(c["a"])(Object(c["a"])({},Object(i["b"])("forecast",["SET_ACTIVE_STATION_ID"])),{},{showStationPopup:function(t){this.station=t,this.stationPopup.openPopup(t.coords)},showVehiclePopup:function(t){this.vehicle=t,this.vehiclePopup.openPopup(t.coords)},typeLabel:function(t){return{bus:"Автобус",minibus:"Маршрутка",trolleybus:"Троллейбус",tram:"Трамвай",station:"Остановка"}[t]},icon:function(t){var e=t.route,n=t.item,r=this.$createElement,a=o["a"].extend(Et["b"]),c={station:hn,bus:Lt,minibus:Zt,trolleybus:Jt,tram:Mt}[n.type],i="station"===n.type?14:22,s="".concat(this.typeLabel(n.type)," ").concat("station"===n.type?"":" №").concat(n.label),u=new a({propsData:{node:r(pt,{attrs:{"icon-name":s,width:i,height:i,"icon-color":"#ffffff"}},[r(c)])}});return jn.a.divIcon({html:u.$mount().$el.outerHTML,className:"icon-item ".concat([e.type]," ").concat([n.type]),iconSize:i+4,iconAnchor:[i/2,i/2]})}})},Ln=In,Pn=Object(l["a"])(Ln,Ye,tn,!1,null,"94bcf16c",null),An=Pn.exports,Dn=n("7116"),kn=n("2699"),Un=n("a40a"),Mn=n("c8b6"),Vn=n("f5ed"),Nn=(n("6cc5"),{name:"MapLayer",components:{MapLayerRouteLines:An,LMap:kn["a"],LTileLayer:Un["a"],LControlZoom:Mn["a"],LControlAttribution:Vn["a"]},data:function(){return{map:void 0}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(Dn["a"])("mapControls",{fields:["jams","zoom","rotation","center","currentPosition"],base:"",action:"UPDATE_UI"})),Object(i["c"])("mapControls",["minZoom","maxZoom","maxBounds"])),{},{devicePixelRatioScale:function(){return window.devicePixelRatio},mapAttrs:function(){var t=this.minZoom,e=this.maxZoom,n=this.maxBounds;return{minZoom:t,maxZoom:e,maxBounds:n,crs:jn.a.CRS.EPSG3395,options:{zoomControl:!1,attributionControl:!1}}},mapZoomAttrs:function(){return{position:"topright",zoomInText:'<span aria-hidden="true" class="material-icons-round zoom-in">add</span>',zoomOutText:'<span aria-hidden="true" class="material-icons-round zoom-in">remove</span>'}},mapTileURL:function(){var t=this.devicePixelRatioScale;return"https://core-renderer-tiles.maps.yandex.net/tiles?l=map&x={x}&y={y}&z={z}&scale=".concat(t,"&lang=ru_RU")}}),methods:{mapReady:function(){this.map=this.$refs.map.mapObject}}}),$n=Nn,zn=(n("8e60"),Object(l["a"])($n,Qe,Xe,!1,null,"879c9a48",null)),Bn=zn.exports,Zn={name:"MapView",components:{UILayer:Ke,MapLayer:Bn}},Fn=Zn,Hn=Object(l["a"])(Fn,W,q,!1,null,null,null),Gn=Hn.exports;o["a"].use(G["a"]);var Wn=[{path:"/",name:"MapView",component:Gn}],qn=new G["a"]({mode:"history",base:"/novosibirsk-city-transport/",routes:Wn}),Jn=qn;o["a"].config.productionTip=!1,new o["a"]({router:Jn,store:H,render:function(t){return t(p)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"6ce4":function(t,e,n){t.exports={busColor:"crimson",minibusColor:"tomato",trolleybusColor:"#2e8b57",tramColor:"#9370db"}},"6d0f":function(t,e,n){},7779:function(t,e,n){"use strict";n("01a6")},"7a3a":function(t,e,n){"use strict";n("b2b4")},"8e60":function(t,e,n){"use strict";n("3b80")},"9a2d":function(t,e,n){},"9c0c":function(t,e,n){},"9ee7":function(t,e,n){},b2b4:function(t,e,n){},b3cd:function(t,e,n){},c3d6:function(t,e,n){"use strict";n("d992")},d149:function(t,e,n){},d992:function(t,e,n){},e3d9:function(t,e,n){"use strict";n("d149")},fd31:function(t,e,n){}});
//# sourceMappingURL=app.ba6562be.js.map